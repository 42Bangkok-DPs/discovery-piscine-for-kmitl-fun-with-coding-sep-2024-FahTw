<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>calculator</title>
    <style>
      .cal {
        border: solid red;
        padding: 10px;
        display: inline-block;
      }
    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <div class="cal">
      <input type="text" id="left" placeholder="Enter num" />
      <select name="operation" id="opr">
        <option value="+">+</option>
        <option value="-">-</option>
        <option value="*">*</option>
        <option value="/">/</option>
        <option value="%">%</option>
      </select>
      <input type="text" id="right" placeholder="Enter num" />
      <button id="calculate">Try me</button>
    </div>

    <script>
      $(document).ready(function() {
        function isValidNumber(value) {
          return !isNaN(value) && /^[0-9]+(\.[0-9]+)?$/.test(value);
        }

        function calculator() {
          const leftval = $('#left').val();
          const rightval = $('#right').val();
          const operator = $('#opr').val();

          if (!isValidNumber(leftval) || !isValidNumber(rightval)) {
            alert("Error :(");
            console.log("Error :(");
            return;
          }

          const left = parseFloat(leftval);
          const right = parseFloat(rightval);

          if ((operator === "/" || operator === "%") && right === 0) {
            alert("Error: Division by zero.");
            console.log("Error: Division by zero.");
            return;
          }

          let result;
          switch (operator) {
            case "+":
              result = left + right;
              break;
            case "-":
              result = left - right;
              break;
            case "*":
              result = left * right;
              break;
            case "/":
              result = left / right;
              break;
            case "%":
              result = left % right;
              break;
            default:
              alert("Error :(");
              return;
          }

          // ตรวจสอบว่า result เป็นจำนวนเต็ม
          if (!Number.isInteger(result)) {
            alert("Error: Result is not an integer.");
            console.log("Error: Result is not an integer.");
            return;
          }

          alert("Result: " + result);
          console.log("Result: " + result);
        }

        $('#calculate').click(function() {
          calculator();
        });

        setInterval(function () {
          alert("Please, use me...");
        }, 30000);
      });
    </script>
  </body>
</html>
